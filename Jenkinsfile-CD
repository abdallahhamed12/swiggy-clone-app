pipeline {
    agent any

    stages {
        stage('Deploy to Kubernetes') {
            steps {
                script{
                    withCredentials([file(credentialsId: 'kubeconfig', variable: 'KUBECONFIG')]){
                        sh "kubectl create deploy swiggy-app --image=abdallahhamed/swiggy-app:latest"
                        sh "kubectl expose deploy swiggy-app --port=80 --type=NodePort "
                    }
                }
            }
        }
    }
}

